import java.awt.*;
import java.awt.event.*;

class AwtFrameDemo1 extends Frame {

    // Радіус Землі
    static final double R = 6371000;

    public AwtFrameDemo1() throws HeadlessException {

        Frame f = new Frame("Haversine Distance (AWT)");
        f.setSize(500, 350);
        f.setLayout(new GridLayout(7, 2, 5, 5));

        // GUI компоненти
        Label l1 = new Label("lat1 (град):");
        TextField lat1Field = new TextField(10);

        Label l2 = new Label("lon1 (град):");
        TextField lon1Field = new TextField(10);

        Label l3 = new Label("lat2 (град):");
        TextField lat2Field = new TextField(10);

        Label l4 = new Label("lon2 (град):");
        TextField lon2Field = new TextField(10);

        Label l5 = new Label("Distance D (m):");
        TextField resultField = new TextField(15);
        resultField.setEditable(false);

        Button solveButton = new Button("Solve");
        Button clearButton = new Button("Clear");

        // Додаємо компоненти
        f.add(l1); f.add(lat1Field);
        f.add(l2); f.add(lon1Field);
        f.add(l3); f.add(lat2Field);
        f.add(l4); f.add(lon2Field);
        f.add(l5); f.add(resultField);
        f.add(solveButton); f.add(clearButton);

        // Обробка кнопки Solve
        solveButton.addActionListener(e -> {
            try {
                double lat1 = Double.parseDouble(lat1Field.getText());
                double lon1 = Double.parseDouble(lon1Field.getText());
                double lat2 = Double.parseDouble(lat2Field.getText());
                double lon2 = Double.parseDouble(lon2Field.getText());

                double phi1 = Math.toRadians(lat1);
                double phi2 = Math.toRadians(lat2);
                double dPhi = Math.toRadians(lat2 - lat1);
                double dLambda = Math.toRadians(lon2 - lon1);

                double a = Math.sin(dPhi / 2) * Math.sin(dPhi / 2)
                        + Math.cos(phi1) * Math.cos(phi2)
                        * Math.sin(dLambda / 2) * Math.sin(dLambda / 2);

                double c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));
                double D = R * c;

                resultField.setText(String.format("%.2f", D));
            } catch (Exception ex) {
                resultField.setText("Error!");
            }
        });

        // Обробка кнопки Clear
        clearButton.addActionListener(e -> {
            lat1Field.setText("");
            lon1Field.setText("");
            lat2Field.setText("");
            lon2Field.setText("");
            resultField.setText("");
        });

        // Закривання вікна
        f.addWindowListener(new WindowAdapter() {
            public void windowClosing(WindowEvent e) {
                System.exit(0);
            }
        });

        f.setVisible(true);
    }

    public static void main(String[] args) {
        new AwtFrameDemo1();
    }
}
